import React, { useEffect } from 'react';
import { Link } from 'react-router-dom';
import { useDispatch, useSelector } from 'react-redux';
import { getStock } from '../redux/SotckActions/stocks';

const StockHome = () => {
  const stockData = useSelector((state) => state.stock.data);
  console.log(stockData);
  //   const categoriesState = useSelector((state) => state.category);
  const dispatch = useDispatch();

  useEffect(() => {
    if (stockData.length === 0) {
      dispatch(getStock());
    }
  }, [dispatch, stockData.length]);

  const getTopTen = stockData.filter((item) => item.rank < 5);

  console.log(getTopTen);

  return (
    <div className="flex flex-col gap-11 px-4 py-[5rem]">
      <h3 className="text-2xl md:text-4xl md:w-[500px] mx-auto ">
        Buy Bitcoin, Ethereum, and 250+ cryptocurrencies.
      </h3>
      <div className="max-md:w-full md:w-[60%] mx-auto py-3 md:py-[5rem]">
        {getTopTen.map((item) => (
          <div key={item.uuid} className=" border-b border-[#cecece6e] grid grid-cols-3  items-center gap-2 md:grid-cols-4 py-4">
            <div className="flex gap-2 items-center">
              <img src={item.iconUrl} alt={item.name} className="w-[40px] h-[40px] " />
              <span>
                {' '}
                {item.name}
              </span>
            </div>
            <span>
              {Number(item.price).toFixed(2)}
              {' '}
              $
            </span>
            <span className="max-md:hidden">{item.change}</span>
            <div>
              <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="84" height="30"><polyline points=" 0,28.957260099198688 0.5562913907284768,29.77510696231439 1.1125827814569536,29.501621158905124 1.6688741721854303,29.03371261544234 2.225165562913907,29.223358702978846 2.781456953642384,29.221267926097497 3.3377483443708607,29.113602460068563 3.894039735099337,28.31984523944798 4.450331125827814,28.15429804645523 5.006622516556291,28.752558517541217 5.562913907284768,28.836685518613052 6.119205298013244,29.365122034865216 6.675496688741721,29.7033618073994 7.231788079470198,29.323600523799737 7.788079470198674,29.343204719223472 8.344370860927151,28.839176334628213 8.900662251655628,28.586613853683993 9.456953642384105,29.79004106015454 10.013245033112582,30 10.56953642384106,29.655965585250794 11.125827814569536,29.440914856852213 11.682119205298012,29.536116238830708 12.238410596026489,29.541733151537287 12.794701986754966,29.34452669003196 13.350993377483443,29.256381229152858 13.90728476821192,29.488937219229843 14.463576158940397,29.638625629809383 15.019867549668874,28.500080965610728 15.576158940397349,28.353424611857054 16.132450331125828,27.74158841771778 16.688741721854303,27.49678741252364 17.24503311258278,27.825491337927396 17.801324503311257,27.03917908687487 18.357615894039732,26.998688980281827 18.91390728476821,25.119234968720505 19.470198675496686,25.804852864278136 20.026490066225165,25.8136164153238 20.58278145695364,26.797075343372647 21.13907284768212,27.01068267263055 21.695364238410594,26.779334410136492 22.251655629139073,24.88023244976981 22.807947019867548,24.925294671644963 23.364238410596023,24.840136321669334 23.920529801324502,24.826638166439793 24.476821192052977,24.850882658433523 25.033112582781456,24.507014256897776 25.58940397350993,25.063492774451934 26.14569536423841,25.333928781167398 26.701986754966885,24.786567889540066 27.25827814569536,25.14595955711003 27.81456953642384,24.882483038623207 28.370860927152314,24.62810806130709 28.927152317880793,24.869223612971222 29.48344370860927,24.778994483163878 30.039735099337747,25.04465067396095 30.596026490066222,24.831227428597487 31.152317880794698,24.800692641091693 31.708609271523176,25.03261761720267 32.264900662251655,24.869190257644323 32.82119205298013,24.728973724146957 33.377483443708606,24.74719373355483 33.93377483443708,24.60884352103084 34.49006622516556,24.83406048627006 35.04635761589404,24.53763334632896 35.602649006622514,22.492062797688753 36.15894039735099,22.064688060644517 36.715231788079464,21.38169911852652 37.271523178807946,22.043048744935863 37.82781456953642,21.76998911935914 38.3841059602649,21.55077495651405 38.94039735099337,21.443303117264165 39.496688741721854,22.48898835784725 40.05298013245033,22.059873750790093 40.609271523178805,21.94472580528783 41.16556291390728,22.036221048613676 41.721854304635755,21.74744516699235 42.27814569536424,21.80050173844341 42.83443708609271,21.772946331515218 43.39072847682119,21.433669259880183 43.94701986754966,21.73807840440513 44.503311258278146,21.38127533218308 45.05960264900662,21.07304978131078 45.615894039735096,21.22342944774083 46.17218543046357,20.702527202040326 46.72847682119205,21.503162426879875 47.28476821192053,21.34815408769937 47.841059602649004,21.291165912260567 48.39735099337748,21.081570183163716 48.953642384105954,20.224395711205368 49.50993377483443,20.09618340537564 50.06622516556291,19.090739941129332 50.62251655629139,16.135166241661707 51.17880794701986,16.557050019978433 51.73509933774834,16.216828876747492 52.29139072847682,15.538491874174081 52.847682119205295,12.893701671292906 53.40397350993377,13.124962869879777 53.960264900662246,13.04395526444419 54.51655629139072,12.216779090688117 55.0728476821192,11.56569631931055 55.62913907284768,12.45414174784344 56.185430463576154,12.006073344929675 56.74172185430463,11.591417999734148 57.29801324503311,12.127622690834347 57.854304635761586,13.491813514770005 58.41059602649006,12.233169030742218 58.96688741721854,12.099862884635407 59.52317880794701,11.009939206739851 60.079470198675494,11.169230867313942 60.63576158940397,11.223809210500654 61.192052980132445,10.748203518109921 61.74834437086092,10.63920096346591 62.304635761589395,11.501947200137447 62.86092715231788,12.013765510112197 63.41721854304635,11.667859416973034 63.97350993377483,11.654638315326352 64.52980132450331,11.083618850677123 65.08609271523179,11.860306948170145 65.64238410596026,13.12540619329324 66.19867549668874,12.308491886045495 66.75496688741721,11.859458563289799 67.31125827814569,12.018066236804717 67.86754966887416,11.557623534879689 68.42384105960264,11.229273455490858 68.98013245033113,10.017326979589047 69.5364238410596,8.911876809522479 70.09271523178808,7.557728172408684 70.64900662251655,4.440318989749418 71.20529801324503,3.0011727536647577 71.7615894039735,3.085396838186398 72.31788079470198,2.727700102065672 72.87417218543045,0 73.43046357615893,1.488825434364145 73.98675496688742,1.8339228961975031 74.54304635761589,2.3365530332844706 75.09933774834437,2.589773866760911 75.65562913907284,2.9051282317229834 76.21192052980132,2.9056965151758902 76.7682119205298,3.4042618335351555 77.32450331125827,3.644269888788802 77.88079470198674,2.560884766451448 78.43708609271522,2.7181083278797296 78.99337748344371,0.8080345353897158 79.54966887417218,3.3682049580123774 80.10596026490066,1.558414700340741 80.66225165562913,1.235842058857255 81.21854304635761,1.3940954651064814 81.77483443708608,2.723297812218238 82.33112582781456,1.6356711941016826 82.88741721854304,2.1000887962499775 83.44370860927151,1.8433453538432012" stroke="#1bc4ad" strokeLinecap="round" strokeWidth="1.4" fill="none" /></svg>
            </div>

          </div>
        ))}
      </div>
      <Link to="price" className=" mx-auto capitalize px-5 py-2   outline outline-2 outline-[#2280c3] cursor-pointer rounded-full hover:bg-[#010130] boot md:px-4 md:py-3">
        Check Crypto Prices
      </Link>
    </div>
  );
};

export default StockHome;
